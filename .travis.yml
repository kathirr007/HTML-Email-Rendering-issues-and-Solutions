language: node_js
node_js:
- '6'
- '6.1'
- '5.11'
env:
  global:
  - GH_TOKEN: 98b14c67738e55ff52b06a258f83ac93c6849d0c
  - GH_REF: https://github.com/kathirr007/HTML-Email-Rendering-issues-and-Solutions.git
  - secure: EtEobO1iiwP6Mdd7BqG0yPBiEufCdaWyr+1xg5jmoSNuZuHuh8GERws0dGF2grt9nCgE65BdL7IpwpvNhfIhzvWRJFlGtWTzsm2eqhhx8MQrawyLq9+Vb6byNxwggIfwyvjc2bDOnDFA+lsLHf6XU1hjgPvV3/g/+7zDC9bUedwV+wCTSj1kCQnRJ8ZDdn1QF4+H+nYptDUld2boir38lPf4GWlUt18VuEglXNeGo274TuPfDiwNK6Apl1XQcUnPnyH9nIawguc7Z6c82qBxGi+AktZ8Z5LU7MoXmFl3vQ6xlQelX995tUpqcNVPK8wUkXSDm/ozyYWVhopjsJlRCDXackLACBXRgMjY/2DH25pJfxJ57oIUYnQB+Ns4mlv4ZVEuGghMcDvSk5rjH3bg8GfPPlFn+pOhy1nJVLAjQRB/J6IoUzGCkGOaoJDV7hY74fHorjBq4rdNAVpFpLyDjJ+xqKZXLx5Wk5CnPn0qe2oOkDazRHFPj/jUXWMKAN8rNZtMcKjJ6ByQgvdFop6dDbVF5iOyfJzHuFXaj1iV6Omxcm7zl/rvK1NxmGw7MvbOlJ0E9YSIKteWnHORc8luIid7sy5709FKlWx/lU9POopMnpsBN9QeXt8qv0NZBfki3YovF9P77ocvfchWa14F051MgB3l4ibwul/1b0+ggNU=

branches:
  except:
  - gh-pages
before_script:
- npm install -g gulp
before_install:
- openssl aes-256-cbc -K $encrypted_ac8eb6ebc312_key -iv $encrypted_ac8eb6ebc312_iv
  -in id_rsa.enc -out id_rsa -d
- chmod 755 ./deploy-ghpages.sh
script:
- gulp travis
- chmod +x ./deploy-ghpages.sh
- chmod +x ./deploy.sh
- npm run-script deploy
after_success:
- "./deploy-ghpages.sh"
- "./deploy.sh"
- npm run gh-pages-travis
